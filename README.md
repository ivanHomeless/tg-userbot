# Telegram Content Aggregator Bot

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–æ—Ç –¥–ª—è —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤ —Å AI-—Ä–µ—Ä–∞–π—Ç–∏–Ω–≥–æ–º.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#api-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
- [–°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#—Å–∫—Ä–∏–ø—Ç—ã-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [Deployment](#deployment)
- [Troubleshooting](#troubleshooting)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –û–ø–∏—Å–∞–Ω–∏–µ

–ë–æ—Ç-–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. **–°–æ–±–∏—Ä–∞–µ—Ç** —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö Telegram –∫–∞–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ Telethon (userbot)
2. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ AI (OpenRouter/DeepSeek/Gemini) –¥–ª—è —Ä–µ—Ä–∞–π—Ç–∏–Ω–≥–∞
3. **–ü—É–±–ª–∏–∫—É–µ—Ç** –≤ —Ü–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—Å—Ç–∞, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–∞—è** –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–ª—å–±–æ–º–æ–≤ —á–µ—Ä–µ–∑ —Ä—É—á–Ω–æ–π –±—É—Ñ–µ—Ä + `catch_up=True`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤ –∏–∑ –∞–ª—å–±–æ–º–∞
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö updates —Å —Ä–∞–∑–Ω—ã—Ö Data Centers
- ‚úÖ –û—á–µ—Ä–µ–¥—å –ø—É–±–ª–∏–∫–∞—Ü–∏–π —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
- ‚úÖ PostgreSQL –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ AI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Å fallback
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (asyncio)

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –°–±–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Collector)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–ù–∞–¥–µ–∂–Ω–∞—è** –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–ª—å–±–æ–º–æ–≤: —Ä—É—á–Ω–æ–π –±—É—Ñ–µ—Ä 3—Å + `catch_up=True`
- –°–±–æ—Ä **–≤—Å–µ—Ö** —Ç–µ–∫—Å—Ç–æ–≤ –∏–∑ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∞–ª—å–±–æ–º–∞
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö updates (DC splits)
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ file_id –¥–ª—è –º–µ–¥–∏–∞ (–±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ (Processor)
- AI-—Ä–µ—Ä–∞–π—Ç–∏–Ω–≥ —á–µ—Ä–µ–∑ OpenRouter/DeepSeek/Gemini
- –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π –∏ –º–æ–¥–µ–ª–µ–π –ø—Ä–∏ –ª–∏–º–∏—Ç–∞—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–ª—å–±–æ–º–æ–≤ —Å –µ–¥–∏–Ω—ã–º caption (–≤—Å–µ —Ç–µ–∫—Å—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è)
- –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –ø–æ—Å—Ç–æ–≤ (3 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏)
- –°–±–æ—Ä–∫–∞ –ø–æ—Å—Ç–æ–≤ –∏–∑ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 3. –ü—É–±–ª–∏–∫–∞—Ü–∏—è (Publisher)
- –£–º–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ –º–µ–¥–∏–∞
- –†–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö caption –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–ª—å–±–æ–º–æ–≤ –¥–æ 10 –º–µ–¥–∏–∞
- –ö–æ–Ω—Ç—Ä–æ–ª—å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –º–µ–∂–¥—É –ø–æ—Å—Ç–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ ID, username, —Å—Å—ã–ª–∫–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ invite links
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (title, username)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Telegram API    ‚îÇ
‚îÇ (–ò—Å—Ç–æ—á–Ω–∏–∫–∏)     ‚îÇ
‚îÇ catch_up=True   ‚îÇ ‚Üê –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ updates
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îî‚îÄ events.NewMessage() ‚îÄ‚îÄ‚ñ∫ message_handler
                                    ‚îú‚îÄ grouped_id? ‚Üí –±—É—Ñ–µ—Ä 3—Å ‚Üí album
                                    ‚îî‚îÄ no grouped_id? ‚Üí —Å—Ä–∞–∑—É
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Collector     ‚îÇ‚îÄ‚îÄ‚ñ∫ MessageQueue (PostgreSQL)
‚îÇ collect_album() ‚îÇ    ‚îú‚îÄ –¢–µ–∫—Å—Ç (–≤—Å–µ caption –∏–∑ –∞–ª—å–±–æ–º–∞)
‚îÇ collect_message ‚îÇ    ‚îú‚îÄ –ú–µ–¥–∏–∞ (file_id, access_hash)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ –ê–ª—å–±–æ–º—ã (grouped_id)
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Processor     ‚îÇ
‚îÇ (4 —Ñ–æ–Ω–æ–≤—ã—Ö      ‚îÇ
‚îÇ  –∑–∞–¥–∞—á–∏)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ
     ‚îú‚îÄ‚ñ∫ Rewriter (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)
     ‚îÇ   ‚îî‚îÄ AI —Ä–µ—Ä–∞–π—Ç–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞
     ‚îÇ
     ‚îú‚îÄ‚ñ∫ AwaitingCloser (–∫–∞–∂–¥—ã–µ 15 —Å–µ–∫)
     ‚îÇ   ‚îî‚îÄ –ó–∞–∫—Ä—ã—Ç–∏–µ –∏—Å—Ç–µ–∫—à–∏—Ö –æ–∂–∏–¥–∞–Ω–∏–π
     ‚îÇ
     ‚îî‚îÄ‚ñ∫ PostBuilder (–∫–∞–∂–¥—ã–µ 3 —Å–µ–∫)
         ‚îî‚îÄ –°–±–æ—Ä–∫–∞ –ø–æ—Å—Ç–æ–≤
                       ‚îÇ
                       ‚ñº
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ Post + Media ‚îÇ (PostgreSQL)
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ    Publisher        ‚îÇ
         ‚îÇ (–∫–∞–∂–¥—ã–µ 15 —Å–µ–∫)     ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  –¶–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª      ‚îÇ
         ‚îÇ  (–ø—É–±–ª–∏–∫–∞—Ü–∏—è)       ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. MessageCollector
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–±–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:**
- –û–¥–∏–Ω `message_handler` –¥–ª—è –í–°–ï–• —Å–æ–æ–±—â–µ–Ω–∏–π
- `grouped_id` ‚Üí –±—É—Ñ–µ—Ä 3 —Å–µ–∫—É–Ω–¥—ã ‚Üí `collect_album()`
- –ù–µ—Ç `grouped_id` ‚Üí `collect_message()` —Å—Ä–∞–∑—É

**–õ–æ–≥–∏–∫–∞:**
- –¢–µ–∫—Å—Ç –±–µ–∑ –º–µ–¥–∏–∞ ‚Üí `rewrite_status=pending`
- –ú–µ–¥–∏–∞ —Å —Ç–µ–∫—Å—Ç–æ–º (–æ–¥–∏–Ω–æ—á–Ω–æ–µ) ‚Üí `rewrite_status=pending`
- **–ê–ª—å–±–æ–º** ‚Üí —Å–æ–±–∏—Ä–∞–µ—Ç –í–°–ï —Ç–µ–∫—Å—Ç—ã –∏–∑ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, `rewrite_status=skipped`
- –ú–µ–¥–∏–∞ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ (–æ–¥–∏–Ω–æ—á–Ω–æ–µ) ‚Üí `awaiting_text=True`

#### 2. MessageProcessor
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ—Å—Ç–æ–≤

**–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏:**
1. **Rewriter** (30 —Å–µ–∫)
   - –ë–µ—Ä—ë—Ç `rewrite_status=pending` (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω–æ—á–Ω—ã–µ)
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ AI
   - –û–±–Ω–æ–≤–ª—è–µ—Ç `rewritten_text`, `rewrite_status=done`

2. **AwaitingCloser** (15 —Å–µ–∫)
   - –ó–∞–∫—Ä—ã–≤–∞–µ—Ç `awaiting_text=True` –µ—Å–ª–∏ `awaiting_until < now`

3. **PostBuilder** (3 —Å–µ–∫)
   - –°–æ–±–∏—Ä–∞–µ—Ç –∞–ª—å–±–æ–º—ã (–±—É—Ñ–µ—Ä —É–∂–µ —Å–æ–±—Ä–∞–ª –≤—Å–µ –º–µ–¥–∏–∞ –∑–∞ 3—Å)
   - –†–µ—Ä–∞–π—Ç–∏—Ç caption –∞–ª—å–±–æ–º–∞ —á–µ—Ä–µ–∑ AI (–≤—Å–µ —Ç–µ–∫—Å—Ç—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã)
   - –°–æ–∑–¥–∞—ë—Ç Post + PostMedia
   - –°–æ–±–∏—Ä–∞–µ—Ç –æ–¥–∏–Ω–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–æ—Å—Ç—ã

#### 3. PostPublisher
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ —Ü–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª

**–õ–æ–≥–∏–∫–∞:**
- –ë–µ—Ä—ë—Ç `status=scheduled` —Å `scheduled_at <= now`
- –¢–µ–∫—Å—Ç –±–µ–∑ –º–µ–¥–∏–∞ ‚Üí `send_message`
- –ú–µ–¥–∏–∞ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ ‚Üí `send_file(caption=None)`
- –ú–µ–¥–∏–∞ —Å —Ç–µ–∫—Å—Ç–æ–º:
  - –ï—Å–ª–∏ caption < 1024 ‚Üí `send_file(caption=text)`
  - –ï—Å–ª–∏ caption > 1024 ‚Üí `send_file` + `send_message`
- –ê–ª—å–±–æ–º—ã ‚Üí `send_file([media1, media2, ...], caption=text)`
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø–æ—Å—Ç–∞–º–∏: `POST_DELAY` —Å–µ–∫—É–Ω–¥

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegram-content-bot/
‚îÇ
‚îú‚îÄ‚îÄ app/                          # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ bot_logic.py              # –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ .env
‚îÇ   ‚îú‚îÄ‚îÄ prompts.py                # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è AI
‚îÇ   ‚îú‚îÄ‚îÄ utils.py                  # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (split_text)
‚îÇ   ‚îú‚îÄ‚îÄ ai.py                     # AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (OpenRouter, DeepSeek, Gemini)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/                   # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py               # Base class
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ source.py             # Source (–∏—Å—Ç–æ—á–Ω–∏–∫–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message.py            # MessageQueue (–æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ post.py               # Post, PostMedia (–ø–æ—Å—Ç—ã)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ database/                 # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ engine.py             # AsyncEngine, SessionLocal
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ services/                 # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ collector.py          # MessageCollector
‚îÇ       ‚îú‚îÄ‚îÄ processor.py          # MessageProcessor
‚îÇ       ‚îî‚îÄ‚îÄ publisher.py          # PostPublisher
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # –£—Ç–∏–ª–∏—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ fetch_channel_info.py    # –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ add_sources_from_ids.py  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ ID
‚îÇ   ‚îú‚îÄ‚îÄ add_sources_from_links.py # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ —Å—Å—ã–ª–∫–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ CHEATSHEET.md             # –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ tests/                        # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py               # –§–∏–∫—Å—Ç—É—Ä—ã pytest
‚îÇ   ‚îú‚îÄ‚îÄ unit/                     # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_collector.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_processor.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_publisher.py
‚îÇ   ‚îú‚îÄ‚îÄ integration/              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ fixtures/                 # –ú–æ–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ
‚îú‚îÄ‚îÄ alembic/                      # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ versions/                 # –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ env.py                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îÇ   ‚îî‚îÄ‚îÄ script.py.mako
‚îÇ
‚îú‚îÄ‚îÄ data/                         # –î–∞–Ω–Ω—ã–µ –∏ —Å–µ—Å—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ userbot.session           # Telethon —Å–µ—Å—Å–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)
‚îÇ   ‚îú‚îÄ‚îÄ sources_ids.txt.example   # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å ID
‚îÇ   ‚îú‚îÄ‚îÄ sources_links.txt.example # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ .gitignore
‚îÇ
‚îú‚îÄ‚îÄ logs/                         # –õ–æ–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ bot_work.log
‚îÇ
‚îú‚îÄ‚îÄ main.py                       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ requirements.txt              # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ requirements-test.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ .env.example                  # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ alembic.ini                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îú‚îÄ‚îÄ pytest.ini                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ docker-compose.yml            # Docker Compose –¥–ª—è PostgreSQL
‚îî‚îÄ‚îÄ README.md                     # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend
- **Python 3.11+** - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **asyncio** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Telethon** - MTProto –∫–ª–∏–µ–Ω—Ç –¥–ª—è Telegram
- **SQLAlchemy 2.0** - ORM —Å async –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- **asyncpg** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- **Alembic** - –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

### AI –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- **OpenRouter** - –¥–æ—Å—Ç—É–ø –∫ –º–Ω–æ–∂–µ—Å—Ç–≤—É –º–æ–¥–µ–ª–µ–π
- **DeepSeek** - –±—ã—Å—Ç—Ä—ã–π –∏ –¥–µ—à–µ–≤—ã–π —Ä–µ—Ä–∞–π—Ç–∏–Ω–≥
- **Google Gemini** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL 15+** - –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **SQLite** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **pytest** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **pytest-asyncio** - async —Ç–µ—Å—Ç—ã
- **pytest-cov** - –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11 –∏–ª–∏ –≤—ã—à–µ
- PostgreSQL 15+
- Git

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/yourusername/telegram-content-bot.git
cd telegram-content-bot
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate    # Windows
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

### 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

**macOS (Homebrew):**
```bash
brew install postgresql@15
brew services start postgresql@15
```

**Windows:**
–°–∫–∞—á–∞–π —Å https://www.postgresql.org/download/windows/

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: Docker

```bash
docker-compose up -d
```

`docker-compose.yml` —É–∂–µ –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç.

### 6. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ PostgreSQL
sudo -u postgres psql

# –í psql –≤—ã–ø–æ–ª–Ω–∏:
CREATE DATABASE telegrambot;
CREATE USER botuser WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE telegrambot TO botuser;
\q
```

### 7. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
alembic upgrade head
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
cp .env.example .env
nano .env
```

### 2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Telegram API (–ø–æ–ª—É—á–∏ –Ω–∞ https://my.telegram.org)
API_ID=12345678
API_HASH=abc123def456...
PHONE=+79991234567

# –¶–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
DEST=-1001234567890

# PostgreSQL
DATABASE_URL=postgresql+asyncpg://botuser:your_password@localhost:5432/telegrambot

# AI Provider (openrouter | deepseek | google)
AI_PROVIDER=openrouter

# OpenRouter (–µ—Å–ª–∏ AI_PROVIDER=openrouter)
OPENROUTER_API_KEY=sk-or-v1-xxxxx
MODEL=anthropic/claude-3.5-sonnet

# DeepSeek (–µ—Å–ª–∏ AI_PROVIDER=deepseek)
DEEPSEEK_API_KEY=sk-xxxxx
DEEPSEEK_MODEL=deepseek-chat

# Google Gemini (–µ—Å–ª–∏ AI_PROVIDER=google)
GEMINI_API_KEY=AIzaSy...
GEMINI_MODEL=gemini-1.5-flash

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
POST_DELAY=10              # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ—Å—Ç–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
CAPTION_LIMIT=1024         # –õ–∏–º–∏—Ç caption (1024 –∏–ª–∏ 2048 –¥–ª—è Premium)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
AWAIT_TEXT_TIMEOUT=20      # –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –º–µ–¥–∏–∞ (–ù–ï –¥–ª—è –∞–ª—å–±–æ–º–æ–≤)
MEDIA_ONLY_CAPTION="–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º..."  # –ü–æ–¥–ø–∏—Å—å –¥–ª—è –º–µ–¥–∏–∞ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram API

1. –û—Ç–∫—Ä–æ–π https://my.telegram.org
2. –í–æ–π–¥–∏ —Å –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞
3. –ü–µ—Ä–µ–π–¥–∏ –≤ "API development tools"
4. –°–æ–∑–¥–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. –°–∫–æ–ø–∏—Ä—É–π `API_ID` –∏ `API_HASH`

### 4. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

```bash
python main.py
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
1. –ë–æ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –∫–æ–¥ –∏–∑ Telegram
2. –í–æ–∑–º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç 2FA –ø–∞—Ä–æ–ª—å
3. –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `data/userbot.session`

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python main.py
```

**–í—ã–≤–æ–¥:**
```
2026-01-27 00:00:00 INFO root ========== –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ ==========
2026-01-27 00:00:01 INFO app.database.engine ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
2026-01-27 00:00:02 INFO app.bot_logic ‚úÖ Userbot –ø–æ–¥–∫–ª—é—á—ë–Ω
2026-01-27 00:00:03 INFO app.bot_logic –ù–∞–π–¥–µ–Ω–æ 5 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
2026-01-27 00:00:04 INFO app.bot_logic üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω, –æ–∂–∏–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π...
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

#### –°–ø–æ—Å–æ–± 1: –ü–æ ID

```bash
# –°–æ–∑–¥–∞–π —Ñ–∞–π–ª —Å ID
cat > data/sources_ids.txt << EOF
-1001234567890
-1009876543210
EOF

# –î–æ–±–∞–≤—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏
python -m scripts.add_sources_from_ids data/sources_ids.txt
```

#### –°–ø–æ—Å–æ–± 2: –ü–æ —Å—Å—ã–ª–∫–∞–º/username

```bash
# –û–¥–∏–Ω –∫–∞–Ω–∞–ª
python -m scripts.add_sources_from_links @channel_name

# –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤
python -m scripts.add_sources_from_links @ch1 @ch2 t.me/ch3

# –ò–∑ —Ñ–∞–π–ª–∞
cat > data/sources_links.txt << EOF
@channel1
https://t.me/channel2
https://t.me/+privatelink
EOF

python -m scripts.add_sources_from_links data/sources_links.txt
```

#### –°–ø–æ—Å–æ–± 3: SQL

```sql
INSERT INTO source (chat_id, username, title, join_link, is_active)
VALUES (-1001234567890, 'channel_name', 'Channel Title', 'https://t.me/channel_name', true);
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–∞–Ω–∞–ª—ã userbot
python -m scripts.fetch_channel_info --list

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–∞–Ω–∞–ª
python -m scripts.fetch_channel_info -1001234567890

# –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –ë–î
python -m scripts.fetch_channel_info --all
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –≤ –ë–î

```sql
-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
SELECT chat_id, username, title, is_active FROM source;

-- –û—Ç–∫–ª—é—á–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
UPDATE source SET is_active = false WHERE chat_id = -1001234567890;

-- –í–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ
UPDATE source SET is_active = true WHERE chat_id = -1001234567890;

-- –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
DELETE FROM source WHERE chat_id = -1001234567890;
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### –õ–æ–≥–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f logs/bot_work.log

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
grep ERROR logs/bot_work.log

# –¢–æ–ª—å–∫–æ Processor
grep Processor logs/bot_work.log
```

#### SQL –∑–∞–ø—Ä–æ—Å—ã

```sql
-- –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
SELECT rewrite_status, COUNT(*) 
FROM message_queue 
GROUP BY rewrite_status;

-- –û–∂–∏–¥–∞—é—â–∏–µ —Ç–µ–∫—Å—Ç
SELECT source_id, message_id, awaiting_until 
FROM message_queue 
WHERE awaiting_text = true;

-- –ì–æ—Ç–æ–≤—ã–µ –ø–æ—Å—Ç—ã
SELECT id, status, scheduled_at 
FROM post 
WHERE status = 'scheduled' 
ORDER BY scheduled_at;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
SELECT s.chat_id, s.title, COUNT(m.id) as messages
FROM source s
LEFT JOIN message_queue m ON s.chat_id = m.source_id
GROUP BY s.chat_id, s.title;
```

---

## API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### MessageCollector

```python
from app.services.collector import MessageCollector
from app.database.engine import SessionLocal

async with SessionLocal() as session:
    collector = MessageCollector(session)
    await collector.collect_message(event)
```

**–ú–µ—Ç–æ–¥—ã:**
- `collect_album(event)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–ª—å–±–æ–º–∞ —á–µ—Ä–µ–∑ events.Album
- `collect_message(event)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `_handle_text_message(msg, chat_id)` - —Ç–µ–∫—Å—Ç –±–µ–∑ –º–µ–¥–∏–∞
- `_handle_media_with_text(msg, chat_id)` - –º–µ–¥–∏–∞ + —Ç–µ–∫—Å—Ç (–æ–¥–∏–Ω–æ—á–Ω–æ–µ)
- `_handle_media_without_text(msg, chat_id)` - –º–µ–¥–∏–∞ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ (–æ–¥–∏–Ω–æ—á–Ω–æ–µ)
- `_update_album_collected_at(chat_id, grouped_id)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ —Ç–µ–∫—Å—Ç–∞

### MessageProcessor

```python
from app.services.processor import MessageProcessor

async with SessionLocal() as session:
    processor = MessageProcessor(session)

    # –†–µ—Ä–∞–π—Ç
    await processor.process_pending_rewrites()

    # –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∂–∏–¥–∞–Ω–∏–π
    await processor.close_expired_awaiting()

    # –°–±–æ—Ä–∫–∞ –ø–æ—Å—Ç–æ–≤
    await processor.build_posts_from_messages()
```

**–ú–µ—Ç–æ–¥—ã:**
- `process_pending_rewrites()` - —Ä–µ—Ä–∞–π—Ç –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `rewrite_message(msg)` - —Ä–µ—Ä–∞–π—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `close_expired_awaiting()` - –∑–∞–∫—Ä—ã—Ç–∏–µ –∏—Å—Ç–µ–∫—à–∏—Ö –æ–∂–∏–¥–∞–Ω–∏–π
- `build_posts_from_messages()` - —Å–±–æ—Ä–∫–∞ –ø–æ—Å—Ç–æ–≤ –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `_build_album_post(messages)` - —Å–±–æ—Ä–∫–∞ –∞–ª—å–±–æ–º–∞
- `_build_single_post(msg)` - —Å–±–æ—Ä–∫–∞ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –ø–æ—Å—Ç–∞

### PostPublisher

```python
from app.services.publisher import PostPublisher

publisher = PostPublisher(telethon_client, session)

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
await publisher.publish_scheduled_posts()

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ—Å—Ç–∞
await publisher.publish_post(post)
```

**–ú–µ—Ç–æ–¥—ã:**
- `publish_scheduled_posts()` - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤—Å–µ—Ö `status=scheduled`
- `publish_post(post)` - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ—Å—Ç–∞
- `_send_text_only(text)` - —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç
- `_send_media_only(media_items)` - —Ç–æ–ª—å–∫–æ –º–µ–¥–∏–∞
- `_send_media_and_text(media_items, text)` - –º–µ–¥–∏–∞ + —Ç–µ–∫—Å—Ç
- `_restore_input_media(media_item)` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ InputMedia

### AI –º–æ–¥—É–ª—å

```python
from app import ai

# –†–µ—Ä–∞–π—Ç —Ç–µ–∫—Å—Ç–∞
rewritten = ai.rewrite_text("Original text", max_retries=6)

# –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å
model = ai.get_current_model()

# –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–∞
ai.rotate_key(mark_failed=True)

# –†–æ—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
ai.rotate_model(mark_failed=True)
```

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞

```sql
-- –ò—Å—Ç–æ—á–Ω–∏–∫–∏
CREATE TABLE source (
    chat_id BIGINT PRIMARY KEY,
    username VARCHAR,
    title VARCHAR,
    join_link VARCHAR,
    is_active BOOLEAN DEFAULT TRUE,
    added_at TIMESTAMP DEFAULT NOW()
);

-- –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π
CREATE TABLE message_queue (
    id SERIAL PRIMARY KEY,
    source_id BIGINT REFERENCES source(chat_id),
    message_id BIGINT NOT NULL,
    grouped_id BIGINT,
    original_text TEXT,
    rewritten_text TEXT,
    media_type VARCHAR(20),
    media_file_id BIGINT,
    media_access_hash BIGINT,
    media_file_reference BYTEA,
    rewrite_status VARCHAR(20) DEFAULT 'pending',
    awaiting_text BOOLEAN DEFAULT FALSE,
    awaiting_until TIMESTAMP,
    ready_to_post BOOLEAN DEFAULT FALSE,
    collected_at TIMESTAMP DEFAULT NOW(),
    rewritten_at TIMESTAMP
);

-- –ü–æ—Å—Ç—ã
CREATE TABLE post (
    id SERIAL PRIMARY KEY,
    grouped_id BIGINT,
    original_source_id BIGINT,
    final_text TEXT,
    status VARCHAR(20) DEFAULT 'scheduled',
    scheduled_at TIMESTAMP DEFAULT NOW(),
    posted_at TIMESTAMP,
    post_error TEXT
);

-- –ú–µ–¥–∏–∞ –ø–æ—Å—Ç–æ–≤
CREATE TABLE post_media (
    id SERIAL PRIMARY KEY,
    post_id INTEGER REFERENCES post(id) ON DELETE CASCADE,
    message_queue_id INTEGER REFERENCES message_queue(id),
    media_type VARCHAR(20) NOT NULL,
    media_file_id BIGINT NOT NULL,
    media_access_hash BIGINT NOT NULL,
    media_file_reference BYTEA,
    order_num INTEGER DEFAULT 0
);
```

### –ò–Ω–¥–µ–∫—Å—ã

```sql
CREATE INDEX idx_message_queue_source_id ON message_queue(source_id);
CREATE INDEX idx_message_queue_grouped_id ON message_queue(grouped_id);
CREATE INDEX idx_message_queue_rewrite_status ON message_queue(rewrite_status);
CREATE INDEX idx_message_queue_awaiting_text ON message_queue(awaiting_text);
CREATE INDEX idx_message_queue_ready_to_post ON message_queue(ready_to_post);
CREATE INDEX idx_message_queue_collected_at ON message_queue(collected_at);
CREATE INDEX idx_post_status ON post(status);
CREATE INDEX idx_post_scheduled_at ON post(scheduled_at);
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "Description"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é
alembic downgrade -1

# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
alembic current

# –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
alembic history
```

---

## –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `scripts/README.md` –∏ `scripts/CHEATSHEET.md`.

### –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–∞–Ω–∞–ª—ã
python -m scripts.fetch_channel_info --list

# –î–æ–±–∞–≤–∏—Ç—å –ø–æ username
python -m scripts.add_sources_from_links @channel

# –î–æ–±–∞–≤–∏—Ç—å –ø–æ ID
echo "-1001234567890" > temp.txt
python -m scripts.add_sources_from_ids temp.txt

# –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
python -m scripts.fetch_channel_info --all
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements-test.txt
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=app --cov-report=html

# –¢–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
pytest tests/unit/

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pytest tests/unit/test_collector.py

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/unit/test_collector.py::TestMessageCollector::test_collect_album_with_text

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest -vv

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest -x
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

```bash
pytest --cov=app --cov-report=html
open htmlcov/index.html
```

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

- ‚úÖ `test_collector.py` - MessageCollector (8 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ `test_processor.py` - MessageProcessor (8 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ `test_publisher.py` - PostPublisher (7 —Ç–µ—Å—Ç–æ–≤)

---

## Deployment

### Systemd Service (Linux)

–°–æ–∑–¥–∞–π `/etc/systemd/system/telegram-bot.service`:

```ini
[Unit]
Description=Telegram Content Aggregator Bot
After=network.target postgresql.service

[Service]
Type=simple
User=botuser
WorkingDirectory=/home/botuser/telegram-content-bot
Environment="PATH=/home/botuser/telegram-content-bot/venv/bin"
ExecStart=/home/botuser/telegram-content-bot/venv/bin/python main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å–∫:
```bash
sudo systemctl daemon-reload
sudo systemctl enable telegram-bot
sudo systemctl start telegram-bot
sudo systemctl status telegram-bot
```

### Docker (–±—É–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è)

```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .
CMD ["python", "main.py"]
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### Logrotate

```bash
/home/botuser/telegram-content-bot/logs/*.log {
    daily
    rotate 7
    compress
    delaycompress
    notifempty
    create 0640 botuser botuser
}
```

#### –ê–ª–µ—Ä—Ç—ã

–ù–∞—Å—Ç—Ä–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑:
- **Prometheus** + Grafana
- **Sentry** –¥–ª—è –æ—à–∏–±–æ–∫
- **Telegram** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤

---

## Troubleshooting

### –û—à–∏–±–∫–∞: "Connection refused" (PostgreSQL)

**–ü—Ä–∏—á–∏–Ω–∞:** PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π host.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status postgresql

# –ó–∞–ø—É—Å—Ç–∏
sudo systemctl start postgresql

# –ü—Ä–æ–≤–µ—Ä—å DATABASE_URL –≤ .env
```

### –û—à–∏–±–∫–∞: "FloodWaitError"

**–ü—Ä–∏—á–∏–Ω–∞:** Telegram API –ª–∏–º–∏—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–º–µ–Ω—å—à–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –£–≤–µ–ª–∏—á—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –ü–æ–¥–æ–∂–¥–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è

### –û—à–∏–±–∫–∞: "FILE_REFERENCE_EXPIRED"

**–ü—Ä–∏—á–∏–Ω–∞:** `file_reference` —É—Å—Ç–∞—Ä–µ–ª (Telegram –º–µ–Ω—è–µ—Ç –∫–∞–∂–¥—ã–µ ~1 —á–∞—Å).

**–†–µ—à–µ–Ω–∏–µ:**
- –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ re-fetch
- –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ - –∏—Å–ø–æ–ª—å–∑—É–π forward –≤–º–µ—Å—Ç–æ send_file

### –û—à–∏–±–∫–∞: "AI API limit exceeded"

**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å—á–µ—Ä–ø–∞–Ω –ª–∏–º–∏—Ç API –∫–ª—é—á–∞.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –≤ .env
- –ò—Å–ø–æ–ª—å–∑—É–π —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ (–¥–µ—à–µ–≤–ª–µ)
- –ù–∞—Å—Ç—Ä–æ–π —Ä–æ—Ç–∞—Ü–∏—é –∫–ª—é—á–µ–π

### –ü–æ—Å—Ç—ã –Ω–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å:**
```sql
-- –ï—Å—Ç—å –ª–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã?
SELECT * FROM post WHERE status = 'scheduled';

-- –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏?
SELECT id, post_error FROM post WHERE status = 'failed';

-- –ö–æ—Ä—Ä–µ–∫—Ç–µ–Ω –ª–∏ DEST?
SELECT value FROM settings WHERE key = 'dest';
```

### –õ–æ–≥–∏

```bash
# –í—Å–µ –æ—à–∏–±–∫–∏
grep ERROR logs/bot_work.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
tail -n 100 logs/bot_work.log

# –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
tail -f logs/bot_work.log
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telethon](https://docs.telethon.dev/)
- [SQLAlchemy 2.0](https://docs.sqlalchemy.org/en/20/)
- [Alembic](https://alembic.sqlalchemy.org/)
- [OpenRouter Models](https://openrouter.ai/models)
- [PostgreSQL Docs](https://www.postgresql.org/docs/)

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v1.3.0 (–Ø–Ω–≤–∞—Ä—å 2026) - catch_up=True (–¢–µ–∫—É—â–∞—è)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–ª—å–±–æ–º—ã —Ç–µ—Ä—è–ª–∏ —Ñ–æ—Ç–æ (3 –∏–∑ 6) –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–∑-–∑–∞ DC splits.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `catch_up=True` - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ updates
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: 1 handler –≤–º–µ—Å—Ç–æ 3
- ‚úÖ –†—É—á–Ω–æ–π –±—É—Ñ–µ—Ä 3 —Å–µ–∫—É–Ω–¥—ã (–≤–º–µ—Å—Ç–æ events.Album)
- ‚úÖ –£–±—Ä–∞–Ω `sequential_updates=True` (—É—Å–∫–æ—Ä–µ–Ω–∏–µ)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: —Å—Ç–∞—Ä—ã–π –±–æ—Ç –ø–æ—Ç–µ—Ä—è–ª —Ñ–æ—Ç–æ, –Ω–æ–≤—ã–π –ø–æ–π–º–∞–ª –≤—Å–µ

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –û–¥–∏–Ω `message_handler` –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- Debounce pattern: —Ç–∞–π–º–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ñ–æ—Ç–æ
- `catch_up=True` –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ updates —É Telegram
- –£–¥–∞–ª–µ–Ω—ã: background_album_completion_checker, fallback handler

### v1.1.0 (–Ø–Ω–≤–∞—Ä—å 2026) - –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–ª—å–±–æ–º–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–ª—å–±–æ–º—ã –∏–Ω–æ–≥–¥–∞ —Ç–µ—Ä—è–ª–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å —Ç–∞–π–º–∏–Ω–≥–æ–º.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `events.Album` - Telethon –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –º–µ–¥–∏–∞
- ‚úÖ –°–±–æ—Ä **–≤—Å–µ—Ö** —Ç–µ–∫—Å—Ç–æ–≤ –∏–∑ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∞–ª—å–±–æ–º–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Ç–∞–π–º–µ—Ä—ã –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ - –∏–Ω—Ç–µ—Ä–≤–∞–ª PostBuilder 5—Å ‚Üí 3—Å

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: [GitHub Issues](https://github.com/yourusername/telegram-content-bot/issues)

---

**–í–µ—Ä—Å–∏—è:** 1.3.0
**–î–∞—Ç–∞:** –Ø–Ω–≤–∞—Ä—å 2026
